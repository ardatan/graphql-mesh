---
id: rename
title: Rename Transform
sidebar_label: Rename
---

The `rename` transform allow you rename GraphQL types and GraphQL fields easily. 

```
yarn add @graphql-mesh/transform-rename
```

## How to use?

Add the following configuration to your Mesh config file:

```yml
transforms:
  - rename:
      mode: bare | wrap
      renames:
        - from:
            type: ApiUser
          to:
            type: User
        - from:
            type: Query
            field: apiUser
          to:
            type: Query
            field: user
```

or you can use regular expressions to rename multiple types, fields or both

```yml
  - rename:
      mode: bare | wrap
      renames:
        - from:
            type: Api(.*)
          to:
            type: $1
          useRegExpForTypes: true

        - from:
            type: Query
            field: api(.*)
          to:
            type: Query
            field: $1
          useRegExpForFields: true

```

## Two different modes
Although apparently both `bare` and `wrap` modes do achieve the same result, when it comes to renaming; they are very different.  
Let's take a look at how they operate.

### Wrap
Wrap applies transformations by adding a wrapping layer to the original GraphQL schema. The handler generates a GrpahQL schema and passes it to the rename transform. `wrap` receives this schema and rather than updating it, it will apply a layer on top of it, which scope is to provide the values exposed by the names of the original schema to the new names that you define as `renames`.  
This approach is safe as we have used it extensively in `graphql-tools`. However, it does have a runtime cost, since when receiving requests and preparing responses, the wrapping layer needs to apply the `renames` on the fly for every GraphQL operation.

> NOTE: `wrap` is the only approach that works when you want to transform at all sources (root) level, unless you're using [merger-bare](https://graphql-mesh.com/docs/api/modules/merger-bare/). If you want to remove the runtime cost, consider either moving your `renames` at the data source level or opt into `merger-bare`; in order to take advantage of `bare` mode.

Example:
```yaml
sources:
  - name: Countries
    handler:
      soap:
        wsdl: http://webservices.../wso?WSDL
  - name: Users
    handler:
      openapi:
        source: https://api.../swagger.yaml
    transforms:
      rename:
          mode: wrap # you can use wrap here, but consider using "bare" to remove runtime cost
          renames:
            - from:
                type: User
                field: lastName
              to:
                type: User
                field: surname
transforms:
  rename:
      mode: wrap # bare won't work here at the root sources level, because you're not using merger-bare
      renames:
        - from:
            type: Country
            field: ISO-3166_Code
          to:
            type: Country
            field: code
```

> ProTip: When you want to use `wrap`, you can omit the "mode" property since this is already applied by default.  

### Bare
Bare is a recent addition and works by applying transformations to the original schema. The handler generates a GraphQL schema and passes it to the rename transform. `bare` will rename types and fields as defined in the schema generated by your handler and will return an updated version of the same schema with the transformations applied.  
The advantage of `bare` is that it commits the schema as part of the initialisation process only; then it won't have any runtime cost.  

However, you need to be careful when mixing `bare` and `wrap` transforms, because `bare` always need to access the bare schema. If you define other transforms that don't support `bare` mode, they need to run **after** `bare` transforms; otherwise they will apply a wrapping layer which won't let `bare` transforms access the bare schema.

> NOTE: Normally `bare` won't work when you want to transform at all the sources (root) level, because at this stage it would be dealing with a stitched schema and not a bare schema anymore. If you do want to use `bare` at the root level your only choice is to opt into [merger-bare](https://graphql-mesh.com/docs/api/modules/merger-bare/), which lets transforms access the bare schemas; because it merges sources without wrapping them, which works when you don't have (or you take care of) conflicts between your sources.  

Example:
```yaml
sources:
  - name: Countries
    handler:
      soap:
        wsdl: http://webservices.../wso?WSDL
  - name: Users
    handler:
      openapi:
        source: https://api.../swagger.yaml
    transforms:
      rename:
          mode: bare # bare is a great choice here, at the data source level, as it doesn't have any runtime cost
          renames:
            - from:
                type: User
                field: lastName
              to:
                type: User
                field: surname
merger: bare # this lets transforms access the bare schemas
transforms:
  rename:
      mode: bare # bare will work here because you're using merger-bare
      renames:
        - from:
            type: Country
            field: ISO-3166_Code
          to:
            type: Country
            field: code
```

## Config API Reference

{@import ../generated-markdown/RenameTransformObject.generated.md}
