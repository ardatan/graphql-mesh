# Getting Started

import { Callout, Cards } from '@theguild/components'

Hive Gateway supports two different modes:

- **Serve a Supergraph.** Serve a supergraph provided by a schema registry like
  [Hive Registry](https://the-guild.dev/graphql/hive/docs/features/schema-registry) or a composition
  tool like [Apollo Rover](https://www.apollographql.com/docs/rover/),
  [GraphQL Mesh Compose](/v1/compose) or any other Federation compliant composition tool such as
  [Apollo Rover](https://www.apollographql.com/docs/rover/) or schema registry
  ([Hive Registry](https://the-guild.dev/graphql/hive),
  [Apollo GraphOS](https://www.apollographql.com/docs/graphos/))
- **Proxy a GraphQL API.** Hive Gateway can also act as a proxy to a GraphQL API for adding
  additional features mentioned above.

## Prepare a Supergraph

A Gateway for a composed supergraph file (`supergraph.graphql`) generated by
[Mesh Compose](/v1/compose), or any other compliant tool (Apollo Rover etc), or any compliant schema
registry (Hive Registry or Apollo GraphOS), can be served with Hive Gateway.

## Using the Self-Contained Binary

Hive Gateway provides a self-contained binary that allows you to run the gateway without needing to
install Node.js or any other dependencies. This binary package includes everything you need to start
using it with ease.

### Install

```sh
curl -sSL https://raw.githubusercontent.com/ardatan/graphql-mesh/main/packages/serve-cli/install.sh | sh
```

This command will download the appropriate binary for your operating system, make it executable, and
prepare it for use.

## Using the CLI

### Install

To use the CLI, you need to have [Node.js](https://nodejs.org) installed in your environment. Then,
you can install Hive Gateway CLI with your favorite package manager:

```sh npm2yarn
npm i @graphql-hive/gateway
```

### Serve

Having [prepared the supergraph](#prepare-a-supergraph), serve it with:

```sh
hive-gateway supergraph
```

## Using Docker

Hive Gateway also has an
[official Docker image](https://github.com/ardatan/graphql-mesh/pkgs/container/hive-gateway) that's
easy to use and can directly replace the CLI in environments where Node.js is not present.

### Serve

Having [prepared the supergraph](#prepare-a-supergraph), serve it with:

```sh
docker run -p 4000:4000 -v $(pwd)/supergraph.graphql:/serve/supergraph.graphql ghcr.io/ardatan/hive-gateway supergraph
```

<Callout>
  Check out the [Docker deployment guide](/v1/serve/deployment/docker) for more details on using
  Hive Gateway with Docker.
</Callout>

## Configuration

### Arguments

Hive Gateway supports basic configuration through CLI arguments.

For example, you may want to change the port:

```sh
hive-gateway supergraph --port 5000
```

The Docker image also supports arguments, simply add them to the run command:

```sh
docker run \
  -p 5000:5000 \
  -v "$(pwd)/my-schema.graphql:/serve/my-schema.graphql" \
  ghcr.io/ardatan/hive-gateway supergraph --port=5000
```

For a full list of CLI arguments, please refer to the [CLI Reference](./references/cli).

### Config File

The Hive Gateway config file is used for enabling additional features such as authorization,
authentication caching, rate limiting, and more...

You're recommended to use the `gateway.config.ts` file to configure Hive Gateway.

```ts filename="gateway.config.ts"
import { defineConfig } from '@graphql-hive/gateway'

export const gatewayConfig = defineConfig({
  supergraph: 'my-schema.graphql'
})
```

Hive Gateway will automatically pick up the default config file and apply the settings. Simply start
Hive Gateway:

```sh
hive-gateway supergraph
```

However, when using Docker, you have to mount the `gateway.config.ts` file first:

```sh
docker run \
  -p 4000:4000 \
  -v "$(pwd)/gateway.config.ts:/serve/gateway.config.ts" \
  ghcr.io/ardatan/hive-gateway supergraph
```

## Proxy a GraphQL API

Hive Gateway can also act as a proxy to an existing GraphQL API. This is useful for adding
additional features such as monitoring/tracing, caching, rate limiting, security layers, and more.

You can configure Hive Gateway to proxy a GraphQL API by providing the URL of the API in the
configuration file.

```ts filename="gateway.config.ts"
import { defineConfig } from '@graphql-hive/gateway'

export const gatewayConfig = defineConfig({
  proxy: {
    endpoint: 'https://example.com/graphql'
  }
})
```

Now run:

```sh
hive-gateway proxy
```

and Hive Gateway will start a gateway that proxies the GraphQL API.

## Next steps

After learning the first steps of Hive Gateway, you can explore the following topics.

<Cards>
  <Cards.Card
    arrow
    title="Serve a Supergraph from Hive Registry"
    href="/v1/serve/schema-registry/hive"
  />
  <Cards.Card
    arrow
    title="Serve a Supergraph from Apollo GraphOS"
    href="/v1/serve/schema-registry/graphos"
  />
  <Cards.Card
    arrow
    title="Proxy a GraphQL API"
    href="/v1/serve/references/config#configure-hive-gateway-as-a-graphql-proxy"
  />
</Cards>
